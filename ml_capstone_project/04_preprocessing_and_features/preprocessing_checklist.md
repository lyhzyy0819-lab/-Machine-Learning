# 数据预处理检查清单✓

> **核心理念**："系统化检查，确保预处理完整性，避免遗漏关键步骤"
>
> **适用场景**：预处理完成后的自检、团队协作的标准清单、代码审查参考

---

## 📋 目录

1. [使用指南](#1-使用指南)
2. [快速版检查清单（10分钟）](#2-快速版检查清单10分钟)
3. [完整版检查清单（30分钟）](#3-完整版检查清单30分钟)
4. [项目预处理记录卡](#4-项目预处理记录卡)

---

## 1. 使用指南

### 1.1 两个版本的使用场景

| 版本 | 使用时机 | 检查深度 | 预计时间 |
|------|---------|---------|---------|
| **快速版** | 快速Baseline、日常项目 | 核心必做项 | 10分钟 |
| **完整版** | 重要项目、生产环境、代码审查 | 全面细致 | 30分钟 |

### 1.2 如何使用本清单

**模式1：预处理前（Planning）**
- 浏览清单，了解需要完成的步骤
- 规划预处理流程

**模式2：预处理中（Tracking）**
- 完成一项，勾选一项
- 确保不遗漏关键步骤

**模式3：预处理后（Verification）**
- 全面检查，确保完整性
- 生成预处理报告

### 1.3 打印友好版本

本文档可以直接打印，用于：
- 团队协作的标准清单
- 项目交付文档
- 代码审查参考

---

## 2. 快速版检查清单（10分钟）⭐

**使用场景**：快速Baseline建立、时间紧急的项目、日常数据处理

### 必做项（P0）- 不可跳过

#### 数据质量检查

- [ ] **缺失值已处理**
  - 方法：□ 删除 □ 简单填充 □ 高级填充
  - 剩余缺失值：______个

- [ ] **异常值已检查**
  - 方法：□ IQR检测 □ 3σ检测 □ Isolation Forest
  - 处理方式：□ 保留 □ 删除 □ 截断 □ 转换

- [ ] **重复值已删除**
  - 重复行数：______行（已删除）

#### 特征处理

- [ ] **分类特征已编码**
  - 编码方法：□ One-Hot □ Label □ Target
  - 编码列数：______列

- [ ] **数值特征已缩放（如算法需要）**
  - 缩放方法：□ StandardScaler □ MinMaxScaler □ RobustScaler □ 不需要
  - 缩放列数：______列

#### 数据质量验证

- [ ] **数据形状符合预期**
  - 原始形状：______ × ______
  - 最终形状：______ × ______

- [ ] **无缺失值（训练集）**
  - 检查命令：`df.isnull().sum().sum() == 0`
  - 结果：□ 通过 □ 未通过

- [ ] **无object类型列（已编码）**
  - 检查命令：`df.select_dtypes(include=['object']).columns`
  - 结果：□ 通过 □ 未通过

### 建议项（P1）- 提升性能

- [ ] **特征选择（去除冗余）**
  - 方法：□ 方差过滤 □ 相关性过滤 □ 特征重要性
  - 删除特征数：______列

- [ ] **交互特征创建**
  - 创建数量：______个
  - 主要类型：□ 乘法 □ 除法 □ 多项式

- [ ] **时间特征提取（如有datetime）**
  - 提取特征：□ 年/月/日 □ 星期几 □ 是否周末 □ 距今天数

### 快速检查通过标准

全部P0项已勾选 = ✅ 可以进入建模阶段

---

## 3. 完整版检查清单（30分钟）

**使用场景**：重要项目、生产环境、需要完整文档的项目

### 第一部分：数据诊断与质量检查（10分钟）

#### 1.1 基础信息

- [ ] **数据加载成功**
  - 数据源：________________________________
  - 加载方式：□ CSV □ Database □ API □ 其他
  - 原始形状：______ 行 × ______ 列

- [ ] **数据概况扫描完成**
  - 内存占用：______ MB
  - 数值特征：______ 列
  - 分类特征：______ 列
  - 时间特征：______ 列
  - 目标变量：______ （名称）

#### 1.2 缺失值诊断与处理⭐

- [ ] **缺失值诊断完成**
  - 总缺失值：______ 个
  - 缺失列数：______ 列
  - 最高缺失率：______ % （列名：____________）

- [ ] **缺失机制判断**
  - □ MCAR（完全随机）
  - □ MAR（随机缺失）
  - □ MNAR（非随机缺失）
  - 判断依据：________________________________

- [ ] **缺失值处理方法选择**
  - 缺失率>50%的列：□ 已删除（______ 列）
  - 缺失率<5%的列：□ 已删除行（______ 行）
  - 缺失率5-50%的列：
    - 数值列填充方法：□ 均值 □ 中位数 □ KNN □ 迭代填充
    - 分类列填充方法：□ 众数 □ 新增"Unknown"

- [ ] **缺失值处理效果验证**
  - 填充后缺失值：______ 个（应为0）
  - 填充值分布合理性：□ 已验证
  - 统计量变化：□ 已记录

#### 1.3 异常值检测与处理

- [ ] **异常值检测方法选择**
  - □ IQR方法（适合偏态分布）
  - □ 3σ方法（适合正态分布）
  - □ Isolation Forest（高维数据）
  - □ LOF（密度不均）

- [ ] **异常值数量统计**
  - 检测到异常值：______ 个
  - 占总样本比例：______ %
  - 主要涉及列：________________________________

- [ ] **异常值性质判断**
  - □ 数据错误（已删除/修正）
  - □ 真实极端值（已保留/鲁棒处理）
  - □ 潜在异常事件（已标记/单独建模）

- [ ] **异常值处理方法**
  - □ 删除（______ 个）
  - □ 截断到上下界（IQR）
  - □ 鲁棒标准化
  - □ log变换
  - □ 保留（树模型）

- [ ] **异常值处理效果验证**
  - 处理后分布：□ 已可视化
  - 是否合理：□ 是 □ 否

#### 1.4 重复值与常量特征

- [ ] **重复值检查**
  - 完全重复行：______ 行（已删除）
  - 关键字段重复：______ 行
  - 处理方式：□ 删除 □ 聚合 □ 保留

- [ ] **常量特征检查**
  - 方差为0的列：______ 列（已删除）
  - 准常量列（>95%同值）：______ 列（已删除）

#### 1.5 数据泄漏检查

- [ ] **目标变量未用于特征工程**
  - 检查结果：□ 通过

- [ ] **未使用未来信息（时间序列）**
  - 检查结果：□ 通过 □ 不适用

- [ ] **测试集统计量未泄漏**
  - 填充/缩放只用训练集fit：□ 是
  - Pipeline正确使用：□ 是

---

### 第二部分：特征工程（15分钟）

#### 2.1 特征类型分析

- [ ] **数值特征分布检查**
  - 正态分布列：______ 列
  - 右偏分布列：______ 列（需log变换）
  - 左偏分布列：______ 列（需幂变换）

- [ ] **分类特征基数检查**
  - 低基数（<10）：______ 列
  - 中基数（10-50）：______ 列
  - 高基数（>50）：______ 列

- [ ] **时间特征识别**
  - datetime列：______ 列
  - 已转换为datetime类型：□ 是

#### 2.2 特征变换

- [ ] **数值特征变换（如需要）**
  - log变换：□ 已完成（______ 列）
  - Box-Cox变换：□ 已完成（______ 列）
  - 分箱离散化：□ 已完成（______ 列）

- [ ] **分类特征编码⭐**
  - One-Hot编码：□ 已完成（______ 列）
  - Label编码：□ 已完成（______ 列）
  - Target编码：□ 已完成（______ 列）
  - Frequency编码：□ 已完成（______ 列）

- [ ] **数值特征缩放⭐**
  - 算法类型：□ 线性模型 □ SVM □ NN □ 树模型
  - 是否需要缩放：□ 是 □ 否
  - 缩放方法：
    - □ StandardScaler（______ 列）
    - □ MinMaxScaler（______ 列）
    - □ RobustScaler（______ 列）

#### 2.3 特征构造⭐

- [ ] **时间特征提取（P0）**
  - □ 年/月/日/星期几（______ 列）
  - □ 是否周末（______ 列）
  - □ 是否节假日（______ 列）
  - □ 距今天数（______ 列）
  - □ 季度/月份（______ 列）

- [ ] **缺失值标记（P0）**
  - 创建is_missing列：______ 列
  - 针对缺失率5-20%的列：□ 已完成

- [ ] **交互特征（P1）**
  - 乘法特征：______ 个
  - 除法特征（比例）：______ 个
  - 加减特征：______ 个
  - 多项式特征：□ degree=____

- [ ] **聚合特征（P1）**
  - 分组统计：□ 已完成
  - 分组依据：________________________________
  - 聚合函数：□ mean □ std □ min □ max □ count

- [ ] **降维特征（P2）**
  - PCA特征：□ 已完成（n_components=____）
  - 聚类标签：□ 已完成（n_clusters=____）

#### 2.4 特征选择

- [ ] **低方差特征过滤**
  - 阈值：variance_threshold=____
  - 删除特征数：______ 列

- [ ] **高相关特征过滤**
  - 阈值：correlation_threshold=____
  - 删除特征数：______ 列

- [ ] **特征重要性排序（可选）**
  - 方法：□ RFE □ Lasso □ 树模型重要性
  - 保留特征数：______ 列

---

### 第三部分：数据平衡与验证（5分钟）

#### 3.1 数据平衡（分类问题）

- [ ] **类别平衡性检查**
  - 目标变量分布：
    - 类别1：______ 个（______%）
    - 类别2：______ 个（______%）
  - 不平衡比例：______ （少数/多数）

- [ ] **数据平衡处理（如需要）**
  - □ 不需要（ratio > 0.8）
  - □ 类权重调整（0.5 < ratio ≤ 0.8）
  - □ SMOTE过采样（0.2 < ratio ≤ 0.5）
  - □ 组合策略（ratio ≤ 0.2）

#### 3.2 最终验证⭐

- [ ] **数据完整性检查**
  - 缺失值：______ 个（应为0）
  - 无穷大值：□ 无
  - NaN值：□ 无

- [ ] **数据类型检查**
  - object列：______ 个（应为0）
  - datetime列：□ 已转换或提取
  - 全部为数值：□ 是

- [ ] **数据形状验证**
  - 训练集形状：______ × ______
  - 测试集形状：______ × ______（特征数应相同）

- [ ] **数据范围检查（如缩放）**
  - StandardScaler：均值≈0，标准差≈1
  - MinMaxScaler：范围=[0, 1]
  - 检查结果：□ 通过

#### 3.3 文档记录

- [ ] **预处理步骤记录**
  - □ 已记录所有预处理步骤
  - □ 已保存预处理参数
  - □ 已创建预处理Pipeline

- [ ] **代码可复现性**
  - □ Pipeline可复用（fit/transform分离）
  - □ 随机种子已固定
  - □ 所有参数已记录

- [ ] **预处理报告生成**
  - 原始数据形状：______
  - 最终数据形状：______
  - 删除特征：______ 列
  - 新增特征：______ 列
  - 总耗时：______ 分钟

---

## 4. 项目预处理记录卡

**复制此卡片，填写后保存为项目文档**

```
============================================
        数据预处理记录卡
============================================

【项目信息】
项目名称：________________________________
日期：____________________________________
负责人：__________________________________

【数据概况】
原始形状：______ 行 × ______ 列
最终形状：______ 行 × ______ 列
数据源：__________________________________

【缺失值处理】
方法：□ 删除 □ 简单填充 □ KNN □ 迭代填充
删除列数：______ 列（缺失>50%）
删除行数：______ 行（缺失<5%）
填充列数：______ 列

【异常值处理】
检测方法：□ IQR □ 3σ □ Isolation Forest
异常值数量：______ 个
处理方式：□ 删除 □ 截断 □ 转换 □ 保留

【特征编码】
One-Hot编码：______ 列
Label编码：______ 列
Target编码：______ 列

【特征缩放】
方法：□ Standard □ MinMax □ Robust □ 不需要
缩放列数：______ 列

【特征工程】
时间特征：______ 列
交互特征：______ 个
缺失值标记：______ 列
其他特征：______ 个

【特征选择】
删除低方差特征：______ 列
删除高相关特征：______ 列
最终保留特征：______ 列

【数据平衡（如适用）】
原始比例：______ : ______
处理方法：□ SMOTE □ 权重 □ 不需要
处理后比例：______ : ______

【验证结果】
缺失值检查：□ 通过
数据类型检查：□ 通过
形状验证：□ 通过
Pipeline可复现：□ 是

【关键参数记录】
random_state：______
test_size：______
scaler: ______
其他：________________________________

【备注】
________________________________________
________________________________________
________________________________________

【签字确认】
预处理完成：□        审核通过：□
============================================
```

---

## 📚 相关文档

### 快速参考

- [preprocessing_quick_reference.md](preprocessing_quick_reference.md) - 15分钟速查表
- [preprocessing_decision_tree.md](preprocessing_decision_tree.md) - 系统化决策流程

### 深入学习

- [missing_values_strategies.md](missing_values_strategies.md) - 缺失值详细指南
- [outlier_detection_methods.md](outlier_detection_methods.md) - 异常值检测方法
- [feature_engineering_cookbook.md](feature_engineering_cookbook.md) - 特征工程完整指南

---

## 💬 常见问题

**Q1: 快速版够用吗？**
A: 对于日常项目和快速Baseline够了，重要项目建议用完整版

**Q2: 必须全部勾选吗？**
A: P0项必须勾选，P1和P2根据项目需求选择

**Q3: 可以跳过某些步骤吗？**
A: 可以，但建议至少完成快速版的所有P0项

**Q4: 如何生成预处理报告？**
A: 填写"项目预处理记录卡"，附上关键代码和参数

---

**最后更新**：2024年11月
**打印建议**：A4纸，双面打印
**使用场景**：预处理自检、团队协作、代码审查
