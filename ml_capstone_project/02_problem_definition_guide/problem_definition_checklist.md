# ✅ 问题定义清单

> 系统化的问题定义工作流，从业务需求到完整的ML问题定义
>
> ⏱️ **预计用时**：30-45分钟完成完整的问题定义

---

## 🎯 使用说明

本清单帮助你：
1. ✅ **30-45分钟**完成一个项目的系统化问题定义
2. ✅ 使用可复制的模板和清单
3. ✅ 避免5大常见问题定义错误
4. ✅ 输出完整的问题定义文档，可直接用于后续建模

**适用场景：**
- 正式项目启动，需要完整的问题定义文档
- 与业务部门沟通需求
- 团队协作，需要统一的问题理解

---

## 🚀 5步问题定义工作流

### Step 1: 业务理解（10-15分钟）

#### ✅ 业务目标清单

```
核心问题：
- [ ] 业务目标是什么？（用1句话描述）
      示例："降低客户流失率，提升客户留存"

- [ ] 解决这个问题的价值是什么？
      示例："流失率降低1%，年收入增加500万元"

- [ ] 当前的解决方案是什么？（基线方法）
      示例："人工经验判断 + 简单规则"

- [ ] 预期的改进幅度？（性能目标）
      示例："从当前流失率15%降低到12%"

- [ ] 谁是这个项目的利益相关者？
      示例："营销部门、客户服务部门、数据团队"
```

#### 📊 输出：业务目标卡片

```markdown
## 业务目标卡片

**项目名称**：[项目名称]

**业务目标**：[一句话描述]

**当前方案**：[基线方法及其效果]

**预期价值**：[定量/定性描述]
- 定量：[具体数字，如"年收入增加X%"]
- 定性：[其他价值，如"提升客户满意度"]

**利益相关者**：[列出部门和人员]

**成功标准**：[如何定义项目成功？]
```

---

### Step 2: 数据理解（15-20分钟）

#### ✅ 数据可用性清单

```
数据基本信息：
- [ ] 训练数据样本数 = ？（建议：分类 >1000，回归 >500）

- [ ] 特征数 = ？

- [ ] 是否有标签？（监督学习 = 有标签，无监督学习 = 无标签）
      - [ ] 有标签 → 标签质量如何？
            - 标签准确率：？%
            - 标注来源：[人工标注/业务系统/...]
      - [ ] 无标签 → 如何评估结果？
            - 使用内部指标（如Silhouette Score）
            - 业务验证（如聚类结果的可解释性）

- [ ] 数据更新频率？
      示例："每天/每周/每月更新一次"

- [ ] 数据收集过程有无 bias？
      示例："只收集了投诉客户的数据，缺少正常客户"

- [ ] 是否有缺失值？比例多少？
      - [ ] 缺失值比例 <5%：可以直接删除或填充
      - [ ] 缺失值比例 5%-20%：需要仔细处理
      - [ ] 缺失值比例 >20%：考虑是否使用该特征

- [ ] 是否有异常值？
      - [ ] 需要通过 01_数据诊断框架 检查

- [ ] 数据是否平衡？（分类问题）
      - [ ] 平衡（1:1 至 1:3）→ 可以使用 Accuracy
      - [ ] 轻度不平衡（1:3 至 1:10）→ 使用 F1-Score
      - [ ] 严重不平衡（>1:10）→ 必须使用 F1/AUC/Precision@K
```

#### 📊 输出：数据画像卡片

```markdown
## 数据画像卡片

**数据来源**：[数据库/API/文件/...]

**样本数量**：[数量] 样本

**特征数量**：[数量] 个特征
- 数值特征：[数量] 个
- 类别特征：[数量] 个
- 文本特征：[数量] 个

**标签情况**：
- [ ] 有标签（监督学习）
  - 标签质量：[高/中/低]
  - 标注来源：[...]
- [ ] 无标签（无监督学习）

**数据质量**：
- 缺失值比例：[%]
- 异常值情况：[描述]
- 数据平衡性：[平衡/不平衡（X:Y）]

**数据更新频率**：[频率]

**潜在问题**：
- [列出数据收集中的bias或质量问题]
```

---

### Step 3: 问题类型确定（5-10分钟）

#### ✅ 问题类型清单

**使用工具**：[problem_type_decision_tree.md](problem_type_decision_tree.md)

```
Step 3.1: 确定监督 vs 无监督
- [ ] 有标签？→ 监督学习
- [ ] 无标签？→ 无监督学习

Step 3.2: 监督学习细分
- [ ] 预测类别？→ 分类问题
      - [ ] 2个类别？→ 二分类
      - [ ] >2个类别？→ 多分类
      - [ ] 多个非互斥标签？→ 多标签分类

- [ ] 预测数值？→ 回归问题
      - [ ] 单一数值？→ 单变量回归
      - [ ] 多个数值？→ 多变量回归

Step 3.3: 无监督学习细分
- [ ] 发现群组？→ 聚类
- [ ] 降低维度？→ 降维
- [ ] 找异常点？→ 异常检测

Step 3.4: 特殊约束检查
- [ ] 是否是时间序列问题？
      - 数据有时间顺序依赖
      - 需要考虑时序模型

- [ ] 是否有序列依赖？
      - 文本、语音等序列数据

- [ ] 是否需要在线学习？
      - 数据持续到达，模型需要持续更新
```

#### 📊 输出：问题类型标签

```markdown
## 问题类型

**主要类型**：[分类/回归/聚类/降维/异常检测]

**细分类型**：[二分类/多分类/单变量回归/...]

**特殊约束**：
- [ ] 时间序列
- [ ] 序列数据
- [ ] 在线学习
- [ ] 其他：[...]
```

---

### Step 4: 评估指标选择（10-15分钟）

#### ✅ 指标选择清单

**使用工具**：[metrics_selection_guide.md](metrics_selection_guide.md)

```
Step 4.1: 分析业务需求
- [ ] 业务关注什么？
      - [ ] 准确性（整体预测准确）
      - [ ] 不能误判（Precision优先）
      - [ ] 不能漏检（Recall优先）
      - [ ] 排序质量（AUC优先）
      - [ ] 相对误差（MAPE优先）

- [ ] 假阳性和假阴性的代价是什么？
      示例："假阳性 = 骚扰正常用户，代价中等"
             "假阴性 = 漏掉流失客户，代价高"

Step 4.2: 选择主要指标
- [ ] 使用 metrics_selection_guide 的决策树
- [ ] 主要指标 = ？（用于模型选择和优化）
- [ ] 目标值 = ？（如：AUC > 0.75）

Step 4.3: 选择次要指标
- [ ] 次要指标1 = ？（多角度评估）
- [ ] 次要指标2 = ？（可选）
- [ ] 监控指标 = ？（用于监控特定方面）

Step 4.4: 确认业务可解释性
- [ ] 业务部门能理解这些指标吗？
- [ ] 如何向业务部门解释模型效果？
      示例："AUC = 0.75" → "模型能准确排序客户流失风险，
             Top 10%中有60%是真流失客户"
```

#### 📊 输出：评估指标卡片

```markdown
## 评估指标

**主要指标**：[指标名]
- **目标值**：[如：AUC > 0.75]
- **选择原因**：[为什么选择这个指标？]

**次要指标**：
1. [指标名] - 目标值：[...] - 原因：[...]
2. [指标名] - 目标值：[...] - 原因：[...]

**监控指标**：[可选]
- [指标名]：用于监控 [...]

**业务解释**：
- 如何向业务部门解释模型效果？
  [用业务语言描述指标含义]
```

---

### Step 5: 约束条件明确（5-10分钟）

#### ✅ 约束条件清单

```
技术约束：
- [ ] 预测延迟要求？
      - [ ] 实时预测（<100ms）
      - [ ] 准实时（<1s）
      - [ ] 离线预测（可接受较长时间）

- [ ] 训练时间限制？
      - [ ] 每天重新训练
      - [ ] 每周/每月重新训练
      - [ ] 一次训练长期使用

- [ ] 计算资源限制？
      - [ ] 训练资源：[CPU/GPU，内存，...]
      - [ ] 推理资源：[...]

- [ ] 模型大小限制？
      - [ ] 需要部署到边缘设备（<100MB）
      - [ ] 部署到云端（无限制）

业务约束：
- [ ] 可解释性要求？
      - [ ] 高（需要向客户或监管部门解释）→ 线性模型、决策树
      - [ ] 中（需要向业务部门解释）→ 树模型、规则提取
      - [ ] 低（黑盒可接受）→ XGBoost、神经网络

- [ ] 模型更新频率？
      - [ ] 需要实时更新（在线学习）
      - [ ] 定期批量更新
      - [ ] 一次训练长期使用

- [ ] 错误容忍度？
      - [ ] 极低（医疗、金融关键决策）
      - [ ] 中等（推荐系统、营销）
      - [ ] 较高（探索性分析）

- [ ] 合规性要求？
      - [ ] 是否涉及隐私数据？（GDPR、个人信息保护）
      - [ ] 是否需要审计？（金融、医疗）
      - [ ] 是否有公平性要求？（反歧视）
```

#### 📊 输出：约束条件卡片

```markdown
## 约束条件

**技术约束**：
- 预测延迟：[实时<100ms / 准实时<1s / 离线]
- 训练时间：[限制]
- 计算资源：[CPU/GPU，内存]
- 模型大小：[限制]

**业务约束**：
- 可解释性：[高/中/低]
- 更新频率：[实时/批量/长期]
- 错误容忍度：[极低/中等/较高]

**合规性约束**：
- 隐私保护：[要求]
- 审计要求：[要求]
- 公平性：[要求]

**其他约束**：
- [列出其他特殊约束]
```

---

## 📄 问题定义模板

完成5步工作流后，使用以下模板整理成完整文档：

```markdown
# ML项目问题定义文档

---

## 📋 项目基本信息

**项目名称**：[项目名称]

**创建日期**：[日期]

**负责人**：[姓名]

**利益相关者**：[部门和人员]

---

## 1. 业务背景

### 业务目标
[一句话描述业务目标]

### 当前方案
- **现状**：[当前如何解决这个问题]
- **效果**：[当前方案的效果如何]
- **问题**：[当前方案存在什么问题]

### 预期价值
- **定量价值**：[具体数字，如"年收入增加X%"、"成本降低X%"]
- **定性价值**：[其他价值，如"提升客户满意度"、"优化决策流程"]

### 成功标准
- [定义项目成功的标准]
- 示例："模型AUC达到0.75且在生产环境稳定运行3个月"

---

## 2. 数据概况

### 数据来源
- **数据源**：[数据库/API/文件/...]
- **更新频率**：[每天/每周/每月]

### 数据规模
- **样本数量**：[数量] 样本
  - 训练集：[数量]
  - 验证集：[数量]（可选）
  - 测试集：[数量]

- **特征数量**：[数量] 个特征
  - 数值特征：[数量] 个（如：年龄、收入）
  - 类别特征：[数量] 个（如：性别、地区）
  - 文本特征：[数量] 个（如：评论、描述）

### 标签情况
- [ ] **有标签**（监督学习）
  - 标签类型：[类别/数值]
  - 标签质量：[高/中/低]
  - 标注来源：[人工标注/业务系统/...]

- [ ] **无标签**（无监督学习）
  - 评估方式：[内部指标/业务验证]

### 数据质量
- **缺失值**：[%] 比例
  - 缺失特征：[列出缺失严重的特征]
  - 处理策略：[删除/填充/...]

- **异常值**：[描述异常值情况]

- **数据平衡性**：
  - [ ] 平衡（类别比例接近）
  - [ ] 轻度不平衡（1:3 至 1:10）
  - [ ] 严重不平衡（>1:10，正负样本比例 [X:Y]）

### 潜在问题
- [列出数据收集中的bias或质量问题]
- 示例："只收集了投诉客户数据，缺少正常客户样本"

---

## 3. 问题定义

### 问题类型
- **主要类型**：[分类/回归/聚类/降维/异常检测]
- **细分类型**：[二分类/多分类/单变量回归/...]

### 输入特征（X）
| 特征名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| feature_1 | 数值/类别/文本 | [描述] | [示例值] |
| feature_2 | ... | ... | ... |

### 目标变量（y）
- **变量名**：[变量名]
- **类型**：[类别/数值]
- **含义**：[描述目标变量的含义]
- **取值范围**：[类别：A/B/C；数值：0-100]

### 特殊约束
- [ ] 时间序列：[是/否]
- [ ] 序列数据：[是/否]
- [ ] 在线学习：[是/否]
- [ ] 其他：[...]

---

## 4. 评估指标

### 主要指标
- **指标名称**：[如：AUC]
- **目标值**：[如：> 0.75]
- **选择原因**：[为什么选择这个指标？与业务目标的对应关系]

### 次要指标
1. **[指标名]** - 目标值：[...] - 原因：[多角度评估的某个方面]
2. **[指标名]** - 目标值：[...] - 原因：[...]

### 监控指标（可选）
- **[指标名]**：用于监控 [特定方面，如"避免过拟合"]

### 业务解释
- 如何向业务部门解释模型效果？
  [用业务语言描述指标含义]

  示例：
  > "模型AUC达到0.78，意味着在每月联系1000个客户的情况下，
  > 能捕获65%的流失客户，相比随机选择（15%）提升4.3倍。"

---

## 5. 约束条件

### 技术约束
- **预测延迟**：[实时<100ms / 准实时<1s / 离线]
- **训练时间**：[限制]
- **计算资源**：[CPU/GPU，内存，...]
- **模型大小**：[限制]

### 业务约束
- **可解释性**：[高/中/低]
  - 高：需要向客户或监管部门解释 → 线性模型、决策树
  - 中：需要向业务部门解释 → 树模型、SHAP解释
  - 低：黑盒可接受 → XGBoost、神经网络

- **更新频率**：[实时/每天/每周/每月/长期]
- **错误容忍度**：[极低/中等/较高]

### 合规性约束
- **隐私保护**：[GDPR、个人信息保护法要求]
- **审计要求**：[金融、医疗等行业要求]
- **公平性**：[反歧视、公平性要求]

### 其他约束
- [列出其他特殊约束]

---

## 6. 风险评估

### 潜在风险

| 风险 | 影响 | 概率 | 缓解措施 |
|------|------|------|----------|
| 数据质量差 | 高 | 中 | 加强数据清洗，与业务确认数据收集流程 |
| 标签噪声高 | 中 | 低 | 人工抽查标签质量，考虑弱监督方法 |
| 模型过拟合 | 高 | 中 | 交叉验证，正则化，增加训练数据 |
| 数据漂移 | 中 | 中 | 定期监控模型性能，设置重训练机制 |
| [其他风险] | ... | ... | ... |

### 退路方案
- 如果模型效果不达标，退路方案是什么？
- 示例："使用简单规则模型作为兜底方案"

---

## 7. 下一步行动

- [ ] **数据诊断**：使用 01_数据诊断框架 进行完整数据诊断
- [ ] **算法选择**：使用 03_算法选择矩阵 选择候选算法
- [ ] **数据预处理**：根据 04_预处理与特征工程 进行数据处理
- [ ] **模型训练与评估**：使用选定的指标评估模型
- [ ] **模型部署**：制定部署方案

---

## 8. 修订记录

| 日期 | 版本 | 修订内容 | 修订人 |
|------|------|----------|--------|
| [日期] | v1.0 | 初始版本 | [姓名] |
| ... | ... | ... | ... |

---

**签署确认**：

- 数据团队：[签名]  日期：[日期]
- 业务团队：[签名]  日期：[日期]
- 项目负责人：[签名]  日期：[日期]
```

---

## 🚫 常见问题定义错误及避免方法

### 错误1：问题定义模糊

#### ❌ 错误示例
- "提升销量"
- "让模型更准"
- "做一个推荐系统"
- "优化客户体验"

**问题**：
- 无法量化
- 无法评估成功与否
- 不知道具体要预测什么

#### ✅ 正确示例
- "预测未来7天的日销量（回归），MAE < 100件，用于库存管理"
- "将客户流失预测AUC从0.7提升到0.75，Recall@20% > 0.6"
- "构建商品推荐系统的点击率预估模型，AUC > 0.75，推理延迟 < 50ms"
- "预测客户满意度（1-5分），RMSE < 0.5分，用于优化服务流程"

#### 避免方法
使用 **SMART 原则**定义目标：
- **S**pecific（具体）：明确预测什么
- **M**easurable（可衡量）：明确评估指标
- **A**chievable（可实现）：目标不能过高或过低
- **R**elevant（相关）：与业务目标相关
- **T**ime-bound（有时限）：明确时间要求

---

### 错误2：评估指标与业务目标不一致

#### ❌ 错误示例1：欺诈检测用 Accuracy
- 正负样本 1:99
- Accuracy = 99%（看起来很高）
- 但模型只是预测所有样本为"正常"

**问题**：
- 指标无法反映真实性能
- 严重不平衡数据下 Accuracy 无意义

#### ❌ 错误示例2：医疗诊断用 Precision
- 只关注"预测为病人中有多少是真病人"
- 忽略了"真病人中有多少被检出"
- **漏诊风险极高**

#### ✅ 正确示例
- **欺诈检测**：使用 Precision@K 或 F1-Score
  - K = 人工审核能力（如每天能审核100笔）
  - Precision@100 = 前100个预测中有多少是真欺诈

- **医疗诊断**：使用 Recall（召回率）
  - Recall = 真病人中有多少被检出
  - 目标：Recall > 0.95（不能漏诊）

#### 避免方法
1. 分析业务场景的"代价"
   - 假阳性（误判）的代价是什么？
   - 假阴性（漏检）的代价是什么？
   - 哪个代价更高？

2. 使用 [metrics_selection_guide.md](metrics_selection_guide.md) 的决策树

3. 与业务部门确认：他们最关心什么？

---

### 错误3：忽略数据特征

#### ❌ 错误示例
- 不平衡数据（正负样本 1:99）
- 直接建模，不做任何处理
- 使用 Accuracy 评估

**问题**：
- 模型会倾向于预测多数类
- 少数类（通常是更重要的类）被忽略

#### ✅ 正确示例
1. **明确标注数据不平衡**
   - 正负样本比例：1:99
   - 问题类型：极度不平衡二分类

2. **选择合适的指标**
   - 主要指标：F1-Score 或 AUC
   - 次要指标：Precision@K, Recall

3. **考虑数据处理策略**
   - 重采样（SMOTE、Undersampling）
   - 使用 class_weight 参数
   - 阈值调整

#### 避免方法
1. 完成 [01_数据诊断框架](../01_data_diagnosis_framework/) 的数据诊断
2. 检查类别分布：
   ```python
   from collections import Counter
   print(Counter(y_train))
   # 输出：{0: 9900, 1: 100} → 严重不平衡！
   ```
3. 在问题定义文档中明确标注数据特征

---

### 错误4：约束条件不明确

#### ❌ 错误示例
- 没考虑实时性要求
- 选择了 XGBoost（推理较慢）
- 部署时发现推理延迟 > 1s，无法满足业务需求

**问题**：
- 模型效果再好，无法满足业务约束也无法使用
- 后期重新建模浪费时间

#### ✅ 正确示例
- 实时推荐系统
  - 约束：推理延迟 < 50ms
  - 算法选择：逻辑回归、线性模型、小规模树模型
  - 舍弃：XGBoost（推理较慢）、深度模型

#### 避免方法
1. 在问题定义阶段明确约束：
   - 预测延迟要求
   - 可解释性要求
   - 计算资源限制

2. 在算法选择时考虑约束：
   ```
   实时预测（<100ms）→ 线性模型、简单树模型
   准实时（<1s）→ XGBoost、LightGBM
   离线预测 → 任意复杂模型
   ```

---

### 错误5：目标设定不现实

#### ❌ 错误示例1：数据量不足
- 样本数：200
- 特征数：50
- 目标：AUC > 0.95

**问题**：
- 数据量太少，容易过拟合
- 目标设定过高，无法实现

#### ❌ 错误示例2：问题本质难度高
- 任务：预测股票价格
- 目标：MAPE < 1%

**问题**：
- 股票价格受多种复杂因素影响
- 即使人类专家也难以达到这个精度

#### ✅ 正确示例
1. **参考类似问题的 benchmark**
   - 搜索相关论文、Kaggle竞赛
   - 了解业界水平
   - 示例："客户流失预测的业界AUC一般在0.7-0.8"

2. **根据数据量设定目标**
   ```
   小样本（<500）：
   - 目标不能过高（如：Accuracy > 0.85）
   - 重点是可解释性和稳定性

   中等样本（500-10K）：
   - 目标适中（如：AUC > 0.75）

   大样本（>10K）：
   - 目标可以较高（如：AUC > 0.85）
   ```

3. **与当前方案对比**
   - 当前方案效果：AUC = 0.65
   - 设定目标：AUC > 0.75（提升15%）
   - 合理增量，而非追求完美

#### 避免方法
1. 调研类似问题的业界水平
2. 与业务部门确认：提升多少才有业务价值？
3. 从保守目标开始，逐步提升

---

## 🎯 实战案例演示

### 案例1：客户流失预测完整定义过程

#### 场景描述
- 公司：电信运营商
- 业务痛点：客户流失率高（15%），影响收入
- 数据：过去1年的客户数据（10000个客户）

#### Step 1: 业务理解（10分钟）

**业务目标卡片：**
```markdown
## 业务目标卡片

**项目名称**：客户流失预测

**业务目标**：降低客户流失率，提升客户留存

**当前方案**：
- 人工经验判断（客服主管凭经验判断哪些客户可能流失）
- 效果：流失率15%，每月流失约125个客户

**预期价值**：
- 定量：流失率降低到12%，年收入增加约500万元
- 定性：提升客户满意度，优化营销资源分配

**利益相关者**：
- 营销部门（执行挽留策略）
- 客服部门（提供客户数据）
- 数据团队（建模和部署）

**成功标准**：
- 模型AUC达到0.75
- 在生产环境稳定运行3个月
- 实际流失率降低至少2个百分点
```

---

#### Step 2: 数据理解（15分钟）

**数据诊断结果：**
```markdown
## 数据画像卡片

**数据来源**：客户关系管理系统（CRM）

**样本数量**：10000 样本
- 训练集：7000
- 验证集：1500
- 测试集：1500

**特征数量**：15 个特征
- 数值特征：8 个（年龄、入网时长、月均消费、通话时长等）
- 类别特征：7 个（性别、套餐类型、地区、是否投诉过等）

**标签情况**：
- [x] 有标签（监督学习）
  - 标签：是否流失（0=留存，1=流失）
  - 标签质量：高（由业务系统自动标注）
  - 标注来源：业务系统（客户是否在30天内取消服务）

**数据质量**：
- 缺失值比例：5%（主要是"投诉次数"字段）
- 异常值情况：月消费有少量异常值（>10000元）
- 数据平衡性：轻度不平衡（流失:留存 = 15:85）

**数据更新频率**：每天更新

**潜在问题**：
- 缺少竞争对手数据（客户流失可能是转向竞争对手）
- 部分老客户的数据字段缺失（系统升级前的数据）
```

---

#### Step 3: 问题类型确定（5分钟）

**使用 problem_type_decision_tree.md 决策：**

```
有标签？→ 是 → 监督学习
预测类别？→ 是 → 分类问题
2个类别？→ 是 → 二分类

特殊约束：
- 时间序列：否（客户之间独立）
- 在线学习：否（每月批量重新训练）
```

**问题类型标签：**
```markdown
## 问题类型

**主要类型**：分类

**细分类型**：二分类（流失 vs 留存）

**特殊约束**：
- [x] 数据轻度不平衡（15:85）
- [ ] 时间序列
- [ ] 在线学习
```

---

#### Step 4: 评估指标选择（10分钟）

**业务需求分析：**
- 营销部门每月只能主动联系1000个客户（预算限制）
- 关注点：
  1. 优先联系最可能流失的客户（排序质量）
  2. 希望能捕获大部分流失客户（召回率）
  3. 不希望浪费资源联系不会流失的客户（精确率）

**使用 metrics_selection_guide.md 决策树：**
```
二分类 + 轻度不平衡 + 需要排序
    ↓
首选：AUC（评估排序质量）
次选：Recall@10%（Top 10%能捕获多少流失客户）
监控：Precision@10%（联系的客户中有多少真流失）
```

**评估指标卡片：**
```markdown
## 评估指标

**主要指标**：AUC（Area Under ROC Curve）
- **目标值**：> 0.75
- **选择原因**：
  - 评估模型的排序质量，确保最可能流失的客户排在前面
  - 不受阈值影响，适合需要排序的场景
  - 业界客户流失预测的标准指标

**次要指标**：
1. Recall@10% - 目标值：> 0.60
   - 原因：Top 10%客户中能捕获60%的流失客户
   - 业务含义：联系1000人，能挽留600个流失客户

2. Precision@10% - 目标值：> 0.35
   - 原因：联系的1000人中，约350人是真流失（相比随机15%提升2.3倍）

**监控指标**：
- F1-Score：综合评估精确率和召回率

**业务解释**：
> "模型AUC达到0.78，在每月联系1000个客户的情况下，
> 能捕获65%的流失客户（约800人中的520人），
> 其中约38%确实会流失（380人），
> 相比随机选择（15%，150人）提升2.5倍，
> 预计可挽留流失客户约190人（50%挽留率），
> 年收入增加约450万元。"
```

---

#### Step 5: 约束条件明确（5分钟）

**约束条件卡片：**
```markdown
## 约束条件

**技术约束**：
- 预测延迟：离线预测（每月预测一次，可接受较长时间）
- 训练时间：每月重新训练，可接受2-3小时
- 计算资源：云端训练，无特殊限制
- 模型大小：无限制

**业务约束**：
- 可解释性：中等
  - 需要向营销部门解释预测原因（用于设计挽留策略）
  - 可以使用树模型 + SHAP 解释

- 更新频率：每月批量预测
- 错误容忍度：中等
  - 预测错误不会造成严重后果（只是营销资源浪费）

**合规性约束**：
- 隐私保护：不涉及敏感个人信息
- 审计要求：无特殊要求

**其他约束**：
- 营销部门每月只能联系1000个客户（预算限制）
- 需要提供流失原因解释（用于设计针对性挽留策略）
```

---

#### 完整问题定义文档（浓缩版）

```markdown
# 客户流失预测 - 问题定义文档

## 1. 业务背景
- 目标：降低流失率从15%到12%，年收入增加500万
- 当前：人工经验判断，效果一般

## 2. 数据概况
- 样本：10000（流失15%，留存85%）
- 特征：15个（8数值+7类别）
- 标签：业务系统标注，质量高

## 3. 问题定义
- 类型：二分类（流失 vs 留存）
- 输入：客户行为、消费、服务使用数据
- 输出：是否流失（0/1）

## 4. 评估指标
- 主要：AUC > 0.75
- 次要：Recall@10% > 0.60, Precision@10% > 0.35

## 5. 约束条件
- 延迟：离线预测（每月一次）
- 可解释性：中等（需向营销部门解释）
- 更新：每月重新训练

## 6. 下一步
- [x] 问题定义完成
- [ ] 算法选择（树模型、XGBoost）
- [ ] 特征工程
- [ ] 模型训练与评估
```

**耗时统计**：
- Step 1（业务理解）：10分钟
- Step 2（数据理解）：15分钟
- Step 3（问题类型）：5分钟
- Step 4（指标选择）：10分钟
- Step 5（约束条件）：5分钟
- **总计：45分钟**

---

### 案例2：房价预测问题定义（快速版）

#### 背景
- 房产中介需要快速估价
- 数据：过去1年的成交数据（5000套房）

#### 5步快速定义（30分钟）

**1. 业务目标（5分钟）**
- 目标：为房屋定价提供参考，误差<10%
- 价值：提升定价准确性，增加成交率

**2. 数据理解（10分钟）**
- 样本：5000套房
- 特征：10个（面积、位置、房龄等）
- 标签：成交价格（万元）

**3. 问题类型（3分钟）**
- 类型：单变量回归

**4. 指标选择（7分钟）**
- 主要：MAPE < 10%（业务关注"误差X%"）
- 次要：RMSE < 50万（控制极端误差）

**5. 约束条件（5分钟）**
- 延迟：在线预测（<1秒）
- 可解释性：高（向客户解释）

**算法选择方向**：
- 线性回归、Ridge（快速+可解释）
- 决策树（可解释）
- 避免：复杂模型（推理慢）

---

## ✅ 最终检查清单

完成问题定义后，逐项检查：

### 完整性检查
- [ ] **业务目标清晰**（用1句话能描述）
- [ ] **数据情况明确**（样本数、特征数、标签情况）
- [ ] **问题类型确定**（分类/回归/聚类等）
- [ ] **评估指标选定**（主要+次要指标，有目标值）
- [ ] **约束条件明确**（技术+业务约束）

### 质量检查
- [ ] **指标与业务目标一致**（如：不平衡数据不用Accuracy）
- [ ] **目标值合理**（参考业界benchmark）
- [ ] **数据质量已诊断**（使用01_数据诊断框架）
- [ ] **约束条件可执行**（如：实时预测<100ms可实现）

### 沟通检查
- [ ] **业务部门确认**（业务目标和成功标准）
- [ ] **数据团队确认**（数据可用性和质量）
- [ ] **技术团队确认**（约束条件可满足）

### 文档检查
- [ ] **使用了模板**（完整填写所有字段）
- [ ] **有具体数字**（不要模糊描述）
- [ ] **有修订记录**（记录变更历史）
- [ ] **有签署确认**（相关方签字）

---

## 🔗 下一步行动

完成问题定义后：

1. **✅ 数据诊断**
   - 使用 [01_数据诊断框架](../01_data_diagnosis_framework/)
   - 详细检查数据质量

2. **✅ 算法选择**
   - 使用 [03_算法选择矩阵](../03_algorithm_selection_matrix/)
   - 根据问题类型、数据特征、约束条件选择算法

3. **✅ 特征工程**
   - 使用 [04_预处理与特征工程](../04_preprocessing_and_features/)
   - 根据选定的算法进行数据预处理

4. **✅ 模型评估**
   - 使用 [05_模型评估](../05_model_evaluation/)
   - 使用选定的指标评估模型

5. **✅ 实战应用**
   - 在 [06_综合项目](../06_comprehensive_project/) 中应用完整流程

---

**最后提醒：**

> 💡 问题定义文档是项目的"宪法"！
> 💡 所有后续决策都应该回到这份文档！
> 💡 发现问题及时更新文档，保持一致性！

---

**准备好了吗？开始你的完整问题定义！**

👉 **推荐工具**：
- [problem_type_decision_tree.md](problem_type_decision_tree.md) - 确定问题类型
- [metrics_selection_guide.md](metrics_selection_guide.md) - 选择评估指标
