# æˆ¿ä»·é¢„æµ‹é¡¹ç›® (House Price Prediction)

> åŸºäºŽCalifornia Housingæ•°æ®é›†çš„å®Œæ•´å›žå½’é—®é¢˜å®žæˆ˜

## ðŸ“‹ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®ç±»åž‹**: å›žå½’é—®é¢˜
**ä¸šåŠ¡åœºæ™¯**: æˆ¿åœ°äº§ä»·æ ¼è¯„ä¼°ç³»ç»Ÿ
**æ•°æ®é›†**: California Housing Dataset
**éš¾åº¦**: â­â­â­

### ä¸šåŠ¡èƒŒæ™¯

æˆ¿åœ°äº§ä¼°ä»·æ˜¯æˆ¿äº§äº¤æ˜“ã€è´·æ¬¾å®¡æ‰¹ã€æŠ•èµ„å†³ç­–çš„é‡è¦ä¾æ®ã€‚æœ¬é¡¹ç›®åŸºäºŽåŠ å·žæˆ¿ä»·æ•°æ®ï¼Œæž„å»ºæœºå™¨å­¦ä¹ æ¨¡åž‹é¢„æµ‹æˆ¿å±‹ä»·æ ¼ï¼Œå¸®åŠ©ï¼š
- æˆ¿åœ°äº§å¹³å°æä¾›è‡ªåŠ¨ä¼°ä»·æœåŠ¡
- è´­æˆ¿è€…åˆ¤æ–­æˆ¿ä»·æ˜¯å¦åˆç†
- æŠ•èµ„è€…è¯†åˆ«ä½Žä¼°/é«˜ä¼°æˆ¿äº§

---

## ðŸ“Š æ•°æ®é›†ä¿¡æ¯

- **æ ·æœ¬æ•°é‡**: 20,640æ¡
- **ç‰¹å¾æ•°é‡**: 8ä¸ª
- **ç›®æ ‡å˜é‡**: median_house_value (æˆ¿ä»·ä¸­ä½æ•°)

### ç‰¹å¾è¯´æ˜Ž

| ç‰¹å¾å | è¯´æ˜Ž | ç±»åž‹ |
|--------|------|------|
| longitude | ç»åº¦ | æ•°å€¼ |
| latitude | çº¬åº¦ | æ•°å€¼ |
| housing_median_age | æˆ¿å±‹å¹´é¾„ä¸­ä½æ•° | æ•°å€¼ |
| total_rooms | æ€»æˆ¿é—´æ•° | æ•°å€¼ |
| total_bedrooms | æ€»å§å®¤æ•° | æ•°å€¼ |
| population | äººå£æ•° | æ•°å€¼ |
| households | å®¶åº­æ•° | æ•°å€¼ |
| median_income | æ”¶å…¥ä¸­ä½æ•° | æ•°å€¼ |
| ocean_proximity | è·æµ·æ´‹è·ç¦» | åˆ†ç±» |

---

## ðŸŽ¯ é¡¹ç›®ç›®æ ‡

1. **é¢„æµ‹å‡†ç¡®åº¦**: RÂ² > 0.80, RMSE < 60,000
2. **ç‰¹å¾å·¥ç¨‹**: åˆ›å»ºæœ‰ä¸šåŠ¡æ„ä¹‰çš„æ–°ç‰¹å¾
3. **æ¨¡åž‹å¯¹æ¯”**: è‡³å°‘å¯¹æ¯”5ç§ä¸åŒæ¨¡åž‹
4. **æ¨¡åž‹èžåˆ**: ä½¿ç”¨Stackingæå‡æ€§èƒ½
5. **å¯è§£é‡Šæ€§**: åˆ†æžç‰¹å¾é‡è¦æ€§

---

## ðŸ”§ æŠ€æœ¯æ ˆ

- **æ•°æ®å¤„ç†**: Pandas, NumPy
- **å¯è§†åŒ–**: Matplotlib, Seaborn
- **æœºå™¨å­¦ä¹ **: Scikit-learn, XGBoost
- **ç‰¹å¾å·¥ç¨‹**: K-Meansèšç±»
- **æ¨¡åž‹è¯„ä¼°**: Cross-validation, Learning Curves

---

## ðŸ“‚ é¡¹ç›®ç»“æž„

```
01_house_price_prediction/
â”œâ”€â”€ house_price_prediction.ipynb    # ä¸»notebook
â”œâ”€â”€ california_housing.csv           # æ•°æ®é›†
â”œâ”€â”€ models/                          # ä¿å­˜çš„æ¨¡åž‹ï¼ˆè¿è¡ŒåŽç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ stacking_model.pkl
â”‚   â”œâ”€â”€ scaler.pkl
â”‚   â””â”€â”€ metadata.pkl
â””â”€â”€ README.md                        # æœ¬æ–‡ä»¶
```

---

## ðŸš€ å¿«é€Ÿå¼€å§‹

### 1. çŽ¯å¢ƒå‡†å¤‡

```bash
# æ¿€æ´»condaçŽ¯å¢ƒ
conda activate ml_env

# å®‰è£…ä¾èµ–ï¼ˆå¦‚æžœè¿˜æ²¡å®‰è£…ï¼‰
pip install pandas numpy matplotlib seaborn scikit-learn xgboost
```

### 2. è¿è¡Œé¡¹ç›®

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd "/Users/lyh/Desktop/ Machine Learning/ml_projects/01_house_price_prediction/"

# å¯åŠ¨Jupyter
jupyter notebook house_price_prediction.ipynb
```

### 3. æŒ‰é¡ºåºè¿è¡Œæ‰€æœ‰å•å…ƒæ ¼

ä»Žå¤´åˆ°å°¾è¿è¡Œnotebookï¼Œè§‚å¯Ÿè¾“å‡ºç»“æžœ

---

## ðŸ“– é¡¹ç›®æµç¨‹

### 1. æ•°æ®åŠ è½½ä¸ŽæŽ¢ç´¢ (15-20åˆ†é’Ÿ)
- æ•°æ®åŸºæœ¬ä¿¡æ¯æŸ¥çœ‹
- ç¼ºå¤±å€¼åˆ†æž
- æ•°æ®åˆ†å¸ƒå¯è§†åŒ–
- ç›¸å…³æ€§åˆ†æž

### 2. æ•°æ®é¢„å¤„ç† (20-30åˆ†é’Ÿ)
- ç¼ºå¤±å€¼å¤„ç†
- å¼‚å¸¸å€¼æ£€æµ‹
- ç‰¹å¾ç¼–ç ï¼ˆOne-Hot Encodingï¼‰
- ç‰¹å¾ç¼©æ”¾ï¼ˆStandardScalerï¼‰

### 3. ç‰¹å¾å·¥ç¨‹ (30-40åˆ†é’Ÿ)
- **åœ°ç†èšç±»**: åŸºäºŽç»çº¬åº¦è¿›è¡ŒK-Meansèšç±»
- **è¡ç”Ÿç‰¹å¾**:
  - rooms_per_household (æ¯æˆ·æˆ¿é—´æ•°)
  - bedrooms_per_room (å§å®¤å æ¯”)
  - population_per_household (æ¯æˆ·äººå£æ•°)
- **ç‰¹å¾é€‰æ‹©**: åŸºäºŽç›¸å…³æ€§å’Œé‡è¦æ€§

### 4. æ¨¡åž‹è®­ç»ƒ (40-60åˆ†é’Ÿ)
è®­ç»ƒå¹¶å¯¹æ¯”ä»¥ä¸‹æ¨¡åž‹ï¼š
- çº¿æ€§å›žå½’ (Baseline)
- Ridgeå›žå½’ (L2æ­£åˆ™åŒ–)
- Lassoå›žå½’ (L1æ­£åˆ™åŒ– + ç‰¹å¾é€‰æ‹©)
- éšæœºæ£®æž— (é›†æˆå­¦ä¹ )
- XGBoost (æ¢¯åº¦æå‡)
- **Stackingèžåˆæ¨¡åž‹** (ç»“åˆå¤šä¸ªæ¨¡åž‹ä¼˜åŠ¿)

### 5. æ¨¡åž‹è¯„ä¼° (20-30åˆ†é’Ÿ)
- äº¤å‰éªŒè¯
- å­¦ä¹ æ›²çº¿åˆ†æž
- æ®‹å·®åˆ†æž
- ç‰¹å¾é‡è¦æ€§

### 6. æ¨¡åž‹ä¼˜åŒ– (30-40åˆ†é’Ÿ)
- è¶…å‚æ•°è°ƒä¼˜ï¼ˆGridSearchCV/RandomizedSearchCVï¼‰
- æ¨¡åž‹èžåˆä¼˜åŒ–

### 7. æ¨¡åž‹ä¿å­˜ä¸Žéƒ¨ç½² (10-15åˆ†é’Ÿ)
- ä¿å­˜æœ€ä½³æ¨¡åž‹
- åˆ›å»ºé¢„æµ‹å‡½æ•°
- æµ‹è¯•é¢„æµ‹æŽ¥å£

---

## ðŸ“Š é¢„æœŸç»“æžœ

### æ€§èƒ½æŒ‡æ ‡

| æ¨¡åž‹ | RÂ² Score | RMSE | MAE |
|------|----------|------|-----|
| çº¿æ€§å›žå½’ | 0.64 | 69,000 | 50,000 |
| Ridge | 0.64 | 69,000 | 50,000 |
| Lasso | 0.63 | 70,000 | 51,000 |
| éšæœºæ£®æž— | 0.81 | 50,000 | 33,000 |
| XGBoost | 0.83 | 48,000 | 31,000 |
| **Stacking** | **0.84** | **46,000** | **30,000** |

*æ³¨ï¼šå…·ä½“ç»“æžœå¯èƒ½å› éšæœºç§å­ç•¥æœ‰å·®å¼‚*

### å…³é”®å‘çŽ°

1. **æœ€é‡è¦ç‰¹å¾**:
   - median_income (æ”¶å…¥) - è´¡çŒ®åº¦ ~40%
   - ocean_proximity (ä½ç½®) - è´¡çŒ®åº¦ ~20%
   - housing_median_age (æˆ¿é¾„) - è´¡çŒ®åº¦ ~10%

2. **åœ°ç†èšç±»æ•ˆæžœæ˜¾è‘—**:
   - æ·»åŠ åœ°ç†èšç±»ç‰¹å¾åŽï¼ŒRÂ²æå‡ 3-5%

3. **æ¨¡åž‹èžåˆä¼˜åŠ¿æ˜Žæ˜¾**:
   - Stackingæ¯”å•ä¸€æœ€ä½³æ¨¡åž‹æå‡ 1-2%

---

## ðŸ’¡ å…³é”®æŠ€æœ¯ç‚¹

### 1. åœ°ç†ç‰¹å¾å·¥ç¨‹
```python
from sklearn.cluster import KMeans

# åŸºäºŽç»çº¬åº¦èšç±»
kmeans = KMeans(n_clusters=10, random_state=42)
df['location_cluster'] = kmeans.fit_predict(df[['latitude', 'longitude']])
```

**ä¸ºä»€ä¹ˆæœ‰æ•ˆ**:
- åœ°ç†ä½ç½®å¼ºç›¸å…³äºŽæˆ¿ä»·ï¼ˆå­¦åŒºã€å•†åœˆç­‰ï¼‰
- èšç±»å¯ä»¥æ•æ‰éžçº¿æ€§åœ°ç†å…³ç³»

### 2. æ¨¡åž‹èžåˆ (Stacking)
```python
from sklearn.ensemble import StackingRegressor

base_models = [
    ('ridge', Ridge()),
    ('rf', RandomForestRegressor()),
    ('xgb', XGBRegressor())
]

meta_model = Ridge()  # å…ƒå­¦ä¹ å™¨

stacking = StackingRegressor(
    estimators=base_models,
    final_estimator=meta_model
)
```

**ä¸ºä»€ä¹ˆæœ‰æ•ˆ**:
- ç»“åˆä¸åŒæ¨¡åž‹çš„ä¼˜åŠ¿
- å‡å°‘å•ä¸€æ¨¡åž‹çš„åå·®

### 3. æ®‹å·®åˆ†æž
- æ£€æŸ¥æ¨¡åž‹é¢„æµ‹æ˜¯å¦å­˜åœ¨ç³»ç»Ÿæ€§åå·®
- è¯†åˆ«å¼‚å¸¸æ ·æœ¬
- æŒ‡å¯¼è¿›ä¸€æ­¥æ”¹è¿›æ–¹å‘

---

## ðŸŽ“ å­¦ä¹ è¦ç‚¹

å®Œæˆæœ¬é¡¹ç›®åŽï¼Œä½ åº”è¯¥æŽŒæ¡ï¼š

### æŠ€æœ¯æŠ€èƒ½
- âœ… å®Œæ•´çš„å›žå½’é—®é¢˜æµç¨‹
- âœ… åœ°ç†æ•°æ®çš„ç‰¹å¾å·¥ç¨‹
- âœ… K-Meansèšç±»åº”ç”¨
- âœ… æ¨¡åž‹èžåˆæŠ€æœ¯
- âœ… è¶…å‚æ•°è°ƒä¼˜æ–¹æ³•
- âœ… äº¤å‰éªŒè¯çš„ä½¿ç”¨

### ä¸šåŠ¡æŠ€èƒ½
- âœ… ç†è§£æˆ¿ä»·å½±å“å› ç´ 
- âœ… ç‰¹å¾å·¥ç¨‹çš„ä¸šåŠ¡æ€è€ƒ
- âœ… æ¨¡åž‹ç»“æžœçš„ä¸šåŠ¡è§£é‡Š
- âœ… é¢„æµ‹ç»“æžœçš„ç½®ä¿¡åº¦è¯„ä¼°

---

## ðŸ” è¿›é˜¶æ–¹å‘

### 1. ç‰¹å¾å·¥ç¨‹æ”¹è¿›
- æ·»åŠ æ›´å¤šå¤–éƒ¨æ•°æ®ï¼ˆå­¦åŒºè¯„åˆ†ã€çŠ¯ç½ªçŽ‡ã€äº¤é€šä¾¿åˆ©åº¦ï¼‰
- å°è¯•å¤šé¡¹å¼ç‰¹å¾
- ä½¿ç”¨PCAé™ç»´

### 2. æ¨¡åž‹ä¼˜åŒ–
- å°è¯•LightGBMã€CatBoost
- æ·±åº¦å­¦ä¹ æ–¹æ³•ï¼ˆMLPï¼‰
- è´å¶æ–¯ä¼˜åŒ–è¶…å‚æ•°

### 3. ä¸šåŠ¡åº”ç”¨
- å¼€å‘é¢„æµ‹API
- æ·»åŠ é¢„æµ‹åŒºé—´ï¼ˆç½®ä¿¡åŒºé—´ï¼‰
- å®žæ—¶æ•°æ®æ›´æ–°æœºåˆ¶

### 4. å¯è§£é‡Šæ€§
- ä½¿ç”¨SHAPå€¼è§£é‡Šé¢„æµ‹
- å±€éƒ¨å¯è§£é‡Šæ€§åˆ†æž
- å¯¹æŠ—æ ·æœ¬æµ‹è¯•

---

## â“ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆä¸ç›´æŽ¥ä½¿ç”¨æœ€å¤æ‚çš„æ¨¡åž‹ï¼Ÿ

**A**:
- æ¨¡åž‹å¤æ‚åº¦ â‰  æ€§èƒ½
- éœ€è¦è€ƒè™‘è¿‡æ‹Ÿåˆé£Žé™©
- ç®€å•æ¨¡åž‹æ›´å®¹æ˜“è§£é‡Šå’Œéƒ¨ç½²
- é€šè¿‡å¯¹æ¯”æ‰¾åˆ°æ€§ä»·æ¯”æœ€é«˜çš„æ–¹æ¡ˆ

### Q2: åœ°ç†èšç±»çš„ç°‡æ•°é‡å¦‚ä½•ç¡®å®šï¼Ÿ

**A**:
- ä½¿ç”¨è‚˜éƒ¨æ³•åˆ™ï¼ˆElbow Methodï¼‰
- å°è¯•ä¸åŒKå€¼ï¼Œè§‚å¯ŸRÂ²å˜åŒ–
- æœ¬é¡¹ç›®ä¸­K=10æ•ˆæžœè¾ƒå¥½

### Q3: ä¸ºä»€ä¹ˆéœ€è¦æ®‹å·®åˆ†æžï¼Ÿ

**A**:
- æ£€æŸ¥æ¨¡åž‹å‡è®¾æ˜¯å¦æ»¡è¶³
- å‘çŽ°ç³»ç»Ÿæ€§è¯¯å·®
- è¯†åˆ«å¼‚å¸¸æ ·æœ¬
- æŒ‡å¯¼æ¨¡åž‹æ”¹è¿›

### Q4: RMSE 46,000 æ˜¯å¥½æ˜¯åï¼Ÿ

**A**:
- ç›¸å¯¹äºŽæˆ¿ä»·å‡å€¼(180,000)çº¦25%
- åœ¨æ²¡æœ‰å¤–éƒ¨æ•°æ®çš„æƒ…å†µä¸‹å·²ç»å¾ˆä¸é”™
- å®žé™…åº”ç”¨ä¸­å¯èƒ½éœ€è¦æ›´é«˜ç²¾åº¦

---

## ðŸ“š å‚è€ƒèµ„æ–™

### æ•°æ®é›†
- [California Housing Dataset - Scikit-learn](https://scikit-learn.org/stable/datasets/real_world.html#california-housing-dataset)
- åŽŸå§‹æ¥æº: 1990å¹´åŠ å·žäººå£æ™®æŸ¥æ•°æ®

### ç›¸å…³æŠ€æœ¯
- [Scikit-learn Ensemble Methods](https://scikit-learn.org/stable/modules/ensemble.html)
- [XGBoost Documentation](https://xgboost.readthedocs.io/)
- [Feature Engineering for Machine Learning](https://www.oreilly.com/library/view/feature-engineering-for/9781491953235/)

---

## âœ… æ£€æŸ¥æ¸…å•

å®Œæˆé¡¹ç›®åŽï¼Œæ£€æŸ¥ä½ æ˜¯å¦ï¼š

- [ ] ç†è§£äº†å®Œæ•´çš„å›žå½’é—®é¢˜æµç¨‹
- [ ] æŽŒæ¡äº†åœ°ç†ç‰¹å¾çš„å¤„ç†æ–¹æ³•
- [ ] ä¼šä½¿ç”¨K-Meansè¿›è¡Œèšç±»
- [ ] ç†è§£æ¨¡åž‹èžåˆçš„åŽŸç†å’Œå®žçŽ°
- [ ] ä¼šè¿›è¡Œè¶…å‚æ•°è°ƒä¼˜
- [ ] èƒ½å¤Ÿè§£é‡Šæ¨¡åž‹ç»“æžœ
- [ ] ç†è§£RÂ²ã€RMSEã€MAEç­‰æŒ‡æ ‡
- [ ] ä¼šè¿›è¡Œæ®‹å·®åˆ†æž
- [ ] èƒ½å¤Ÿä¿å­˜å’ŒåŠ è½½æ¨¡åž‹
- [ ] å¯ä»¥åˆ›å»ºé¢„æµ‹æŽ¥å£

---

## ðŸŽ¯ ä¸‹ä¸€æ­¥

å®Œæˆæœ¬é¡¹ç›®åŽï¼Œå»ºè®®ï¼š

1. **å·©å›ºå›žå½’çŸ¥è¯†**
   - å›žé¡¾çº¿æ€§å›žå½’ã€æ­£åˆ™åŒ–ç­‰åŸºç¡€
   - ç†è§£ä¸åŒæ¨¡åž‹çš„ä¼˜ç¼ºç‚¹

2. **å®Œæˆå®¢æˆ·æµå¤±é¢„æµ‹é¡¹ç›®**
   - å­¦ä¹ åˆ†ç±»é—®é¢˜
   - å¯¹æ¯”å›žå½’å’Œåˆ†ç±»çš„å¼‚åŒ

3. **å‚åŠ Kaggleç«žèµ›**
   - [House Prices: Advanced Regression Techniques](https://www.kaggle.com/c/house-prices-advanced-regression-techniques)
   - åº”ç”¨æ‰€å­¦æŠ€èƒ½ï¼ŒæŒ‘æˆ˜æ›´å¤æ‚çš„é—®é¢˜

---

**ç¥å­¦ä¹ é¡ºåˆ©ï¼æœ‰é—®é¢˜æ¬¢è¿Žåé¦ˆï¼** ðŸ¡ðŸ“ˆ
